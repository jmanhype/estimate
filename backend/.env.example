# ==============================================
# EstiMate Backend - Environment Variables
# ==============================================

# Environment
ENVIRONMENT=development  # development | staging | production
LOG_LEVEL=DEBUG  # DEBUG | INFO | WARNING | ERROR

# ==============================================
# Database Configuration
# ==============================================

# PostgreSQL Connection
DATABASE_URL=postgresql://estimate:estimate@localhost:5432/estimate_dev
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# ==============================================
# Cache Configuration
# ==============================================

# Redis
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=10

# ==============================================
# Authentication (Supabase)
# ==============================================

# Supabase Auth
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_KEY=your-service-key-here

# JWT Settings
JWT_SECRET=your-jwt-secret-from-supabase
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=60

# ==============================================
# Storage Configuration
# ==============================================

# Storage Backend: 'supabase' or 's3'
STORAGE_BACKEND=supabase

# Supabase Storage
SUPABASE_STORAGE_URL=https://your-project.supabase.co/storage/v1
SUPABASE_STORAGE_BUCKET=photos

# AWS S3 (Alternative)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_S3_BUCKET=estimate-dev-photos
# AWS_REGION=us-east-1

# ==============================================
# Computer Vision API
# ==============================================

# Primary: Google Cloud Vision
GOOGLE_APPLICATION_CREDENTIALS=./secrets/google-cloud-key.json
GCP_PROJECT_ID=your-gcp-project-id

# Fallback: AWS Rekognition (Optional)
# AWS_REKOGNITION_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# CV Settings
CV_TIMEOUT_SECONDS=30
CV_MAX_RETRIES=3
CV_CIRCUIT_BREAKER_THRESHOLD=5

# ==============================================
# Payment Integration (Stripe)
# ==============================================

# Stripe (Use test keys for development)
STRIPE_SECRET_KEY=sk_test_your_test_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_API_VERSION=2024-11-20.acacia

# Subscription Price IDs
STRIPE_PRICE_ID_PRO_MONTHLY=price_test_pro_monthly
STRIPE_PRICE_ID_PRO_ANNUAL=price_test_pro_annual
STRIPE_PRICE_ID_BUSINESS_MONTHLY=price_test_business_monthly
STRIPE_PRICE_ID_BUSINESS_ANNUAL=price_test_business_annual

# ==============================================
# Email Configuration
# ==============================================

# SMTP Settings (Use Mailhog for local dev)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@estimate.local
SMTP_FROM_NAME=EstiMate

# ==============================================
# Security
# ==============================================

# CORS Settings
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOW_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_STORAGE_URL=redis://localhost:6379/1

# ==============================================
# Third-Party APIs
# ==============================================

# Retailer API Keys (for pricing integration)
# Home Depot API
HOME_DEPOT_API_KEY=your-home-depot-api-key
HOME_DEPOT_API_URL=https://api.homedepot.com

# Lowe's API
LOWES_API_KEY=your-lowes-api-key
LOWES_API_URL=https://api.lowes.com

# ==============================================
# Monitoring & Observability
# ==============================================

# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# ==============================================
# Feature Flags
# ==============================================

FEATURE_TEMPLATES_ENABLED=true
FEATURE_TIMELINE_ENABLED=true
FEATURE_CONTRACTOR_MODE_ENABLED=true
FEATURE_AI_LEARNING_ENABLED=false

# ==============================================
# Performance Tuning
# ==============================================

# Caching
PRICING_CACHE_TTL_HOURS=48
CV_RESULTS_CACHE_TTL_HOURS=24
USER_PROFILE_CACHE_TTL_MINUTES=30

# Timeouts
API_TIMEOUT_SECONDS=30
CV_API_TIMEOUT_SECONDS=60
RETAILER_API_TIMEOUT_SECONDS=10

# ==============================================
# Testing
# ==============================================

# Test Database (for integration tests)
TEST_DATABASE_URL=postgresql://estimate:estimate@localhost:5432/estimate_test
